<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Currency Converter</title>
    <style>
      body {
        font-family: sans-serif;
        background-color: #f4f4f9;
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        width: 400px;
        margin: auto;
      }
      h1 {
        text-align: center;
        color: #333;
      }
      .converter-box {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }
      .input-group label,
      .currency-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        color: #555;
      }
      input[type="number"],
      select {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
        font-size: 16px;
      }
      .currency-group {
        display: flex;
        justify-content: space-between;
        gap: 10px;
      }
      .currency-group > div {
        flex-basis: 48%;
      }
      button {
        width: 100%;
        padding: 12px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 18px;
        cursor: pointer;
      }
      button:hover {
        background-color: #0056b3;
      }
      .result-area {
        margin-top: 15px;
        text-align: center;
      }
      #result-text {
        font-size: 1.2rem;
        color: #2ecc71;
        font-weight: bold;
      }
      .error-text {
        color: #e74c3c;
        font-size: 0.9rem;
        margin-top: 10px;
        display: none; /* Hidden by default */
      }

      .dictionary-container {
        background: #fff;
        padding: 2.5rem;
        border-radius: 15px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
        width: 400px;
        text-align: center;
        margin: auto;
      }

      .search-box {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }

      input {
        flex: 1;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }

      button {
        padding: 10px 15px;
        background-color: #28a745;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      .result-display {
        text-align: left;
        margin-top: 20px;
      }

      .word-header {
        color: #333;
        margin-bottom: 5px;
      }
      .pos {
        font-style: italic;
        color: #666;
        font-size: 0.9rem;
      }
      .definition {
        margin-top: 10px;
        line-height: 1.4;
        color: #444;
      }
      .example {
        color: #888;
        font-size: 0.85rem;
        margin-top: 5px;
      }
      #controls {
        margin-bottom: 20px;
      }
      label {
        font-weight: bold;
        margin-right: 8px;
      }
      input[type="date"] {
        padding: 6px 10px;
        border-radius: 6px;
        border: none;
        font-size: 16px;
        max-width: 200px;
      }
      #content {
        max-width: 720px;
        width: 100%;
        background: #1f2833;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 0 20px #45a29e;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 16px;
      }
      #media {
        max-width: 100%;
        border-radius: 12px;
        box-shadow: 0 0 15px #45a29e;
        max-height: 480px;
        object-fit: contain;
      }
      #title {
        font-size: 1.6em;
        font-weight: bold;
        color: #66fcf1;
        text-align: center;
      }
      #description {
        font-size: 1em;
        line-height: 1.4;
        color: #c5c6c7;
        text-align: justify;
        max-height: 220px;
        overflow-y: auto;
        padding-right: 8px;
      }
      #error {
        color: #ff5555;
        font-weight: bold;
        margin-top: 12px;
      }
      a {
        color: #45a29e;
        text-decoration: none;
      }
      a:hover {
        text-decoration: underline;
      }
      @media (max-width: 768px) {
        #content {
          padding: 16px;
        }
        #title {
          font-size: 1.3em;
        }
      }
    </style>
  </head>
  <body>
    <h1>MINI PROJECT 4: Currency Converter</h1>
    <div class="container">
      <h1>Currency Converter</h1>
      <div class="converter-box">
        <div class="input-group">
          <label for="amount">Amount</label>
          <input type="number" id="amount" value="5000" min="0" />
        </div>

        <div class="currency-group">
          <div>
            <label for="from-currency">From</label>
            <select id="from-currency">
              <option value="EUR" selected>EUR</option>
              <option value="USD">USD</option>
              <option value="GBP">GBP</option>
              <option value="INR">INR</option>
            </select>
          </div>
          <!-- An optional swap button could go here -->
          <div>
            <label for="to-currency">To</label>
            <select id="to-currency">
              <option value="INR" selected>INR</option>
              <option value="USD">USD</option>
              <option value="GBP">GBP</option>
              <option value="EUR">EUR</option>
            </select>
          </div>
        </div>

        <button onclick="convertCurrency()">Get Exchange Rate</button>

        <div class="result-area">
          <p id="result-text">Converted Value: **--**</p>
          <p id="error-message" class="error-text">
            API Error. Check your Key.
          </p>
        </div>
      </div>
    </div>
    <script>
      // --- IMPORTANT: Replace with your own API Key ---
      const API_KEY = "YOUR_API_KEY";
      // Get a free key from: www.exchangerate-api.com

      const amountInput = document.getElementById("amount");
      const fromCurrencySelect = document.getElementById("from-currency");
      const toCurrencySelect = document.getElementById("to-currency");
      const resultText = document.getElementById("result-text");
      const errorMessage = document.getElementById("error-message");

      async function convertCurrency() {
        const amount = amountInput.value;
        const fromCurrency = fromCurrencySelect.value;
        const toCurrency = toCurrencySelect.value;

        if (amount <= 0 || fromCurrency === toCurrency) {
          resultText.textContent =
            "Please enter valid amount and different currencies.";
          return;
        }

        try {
          // Fetching the exchange rate for the base currency
          const response = await fetch(
            `v6.exchangerate-api.com{API_KEY}/latest/${fromCurrency}`
          );
          const data = await response.json();

          // Check for API errors (like in the image)
          if (data.result === "error") {
            // Display the specific error from the API (e.g., "invalid-key")
            errorMessage.textContent = `API Error: ${data["error-type"]}. Check your Key.`;
            errorMessage.style.display = "block";
            resultText.textContent = "Conversion failed.";
            return;
          }

          errorMessage.style.display = "none"; // Hide error if successful

          const rate = data.conversion_rates[toCurrency];
          if (rate) {
            const convertedAmount = (amount * rate).toFixed(2);
            resultText.innerHTML = `Converted Value: **${convertedAmount}** ${toCurrency}`;
          } else {
            resultText.textContent = `Rate for ${toCurrency} not found.`;
          }
        } catch (error) {
          console.error("Fetch error:", error);
          errorMessage.textContent = "Network error. Could not fetch rates.";
          errorMessage.style.display = "block";
        }
      }

      // Initial conversion on page load
      convertCurrency();
    </script>
    <hr />
    <h1>MiniProject No 5: Dictionary App</h1>
    <div class="dictionary-container">
      <h2>Dictionary App</h2>
      <div class="search-box">
        <input
          type="text"
          id="wordInput"
          placeholder="Enter a word..."
          autocomplete="off"
        />
        <button id="searchBtn">Search</button>
      </div>
      <div id="result" class="result-display">
        <!-- Data will be injected here via JavaScript -->
        <p class="placeholder">Search for a word to get definitions.</p>
      </div>
    </div>
    <script>
      const searchBtn = document.getElementById("searchBtn");
      const wordInput = document.getElementById("wordInput");
      const resultDiv = document.getElementById("result");

      async function fetchDictionaryData() {
        const word = wordInput.value.trim();
        if (!word) return;

        resultDiv.innerHTML = "<p>Loading...</p>";

        try {
          const response = await fetch(
            `https://api.dictionaryapi.dev/api/v2/entries/en/${word}`
          );

          if (!response.ok) {
            throw new Error("Word not found");
          }

          const data = await response.json();
          const entry = data[0];
          const meaning = entry.meanings[0];
          const definition = meaning.definitions[0];

          resultDiv.innerHTML = `
            <div class="content">
                <h3 class="word-header">${entry.word}</h3>
                <span class="pos">${meaning.partOfSpeech}</span>
                <p class="definition"><strong>Definition:</strong> ${
                  definition.definition
                }</p>
                ${
                  definition.example
                    ? `<p class="example"><em>"${definition.example}"</em></p>`
                    : ""
                }
            </div>
        `;
        } catch (error) {
          resultDiv.innerHTML = `<p style="color: red;">Error: ${error.message}. Try another word.</p>`;
        }
      }

      searchBtn.addEventListener("click", fetchDictionaryData);

      // Also trigger search on "Enter" key
      wordInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") fetchDictionaryData();
      });
    </script>
    <hr />
    <h1>MiniProject No 6: NASA Picture of the Day Viewer</h1>
    <div id="controls">
      <label for="date-picker">Select Date:</label>
      <input type="date" id="date-picker" max="" />
    </div>
    <div id="content" aria-live="polite" aria-atomic="true">
      <div id="error" role="alert" style="display: none"></div>
      <div id="title"></div>
      <div id="media-container"></div>
      <div id="description"></div>
    </div>
    <script>
      (function () {
        const API_KEY = "DEMO_KEY"; // You can replace with your own NASA API key if you have one
        const datePicker = document.getElementById("date-picker");
        const titleEl = document.getElementById("title");
        const mediaContainer = document.getElementById("media-container");
        const descriptionEl = document.getElementById("description");
        const errorEl = document.getElementById("error");

        // Set max date to today
        const today = new Date().toISOString().split("T")[0];
        datePicker.max = today;
        datePicker.value = today;

        async function fetchAPOD(date) {
          errorEl.style.display = "none";
          titleEl.textContent = "";
          mediaContainer.innerHTML = "";
          descriptionEl.textContent = "";

          try {
            const url = `https://api.nasa.gov/planetary/apod?api_key=${API_KEY}&date=${date}`;
            const response = await fetch(url);
            if (!response.ok)
              throw new Error(
                `Error: ${response.status} ${response.statusText}`
              );
            const data = await response.json();

            if (data.code) {
              // API error message
              throw new Error(data.msg || "Failed to fetch data");
            }

            titleEl.textContent = data.title || "No title";
            descriptionEl.textContent =
              data.explanation || "No description available.";

            if (data.media_type === "image") {
              const img = document.createElement("img");
              img.id = "media";
              img.src = data.url;
              img.alt = data.title || "NASA Picture of the Day";
              mediaContainer.appendChild(img);
            } else if (data.media_type === "video") {
              const iframe = document.createElement("iframe");
              iframe.id = "media";
              iframe.src = data.url;
              iframe.title = data.title || "NASA Video of the Day";
              iframe.width = "100%";
              iframe.height = "400";
              iframe.allowFullscreen = true;
              iframe.frameBorder = 0;
              mediaContainer.appendChild(iframe);
            } else {
              mediaContainer.textContent = "Media type not supported.";
            }
          } catch (error) {
            errorEl.style.display = "block";
            errorEl.textContent = error.message;
          }
        }

        datePicker.addEventListener("change", () => {
          fetchAPOD(datePicker.value);
        });

        // Initial fetch for today
        fetchAPOD(today);
      })();
      let debounceTimeout;
      datePicker.addEventListener("change", () => {
        clearTimeout(debounceTimeout);
        debounceTimeout = setTimeout(() => {
          fetchAPOD(datePicker.value);
        }, 500); // wait 500ms after last change before fetching
      });
    </script>
  </body>
</html>
